<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WOFF Sample</title>
    <style>

div.content-section {
            background-color: #f5f5f5;
            margin: 10px 0;
            padding: 15px;
            border-radius: 8px;
        }    
        button {
        padding: 20px 30px;       /* ボタンの内側の余白を追加 */
        font-size: 18px;         /* フォントサイズを大きくする */
        border-radius: 8px;      /* ボタンの角を丸くする */
        cursor: pointer;         /* ポインタをハンド型にする */
        background-color: #007BFF;   /* ボタンの背景色 */
        color: white;            /* ボタンの文字色 */
        border: none;            /* ボタンのボーダーを無くす */
        margin-top: 10px;        /* ボタンの上側の余白を追加 */
        margin-bottom: 10px;     /* ボタンの下側の余白を追加 */
        transition: background-color 0.3s;  /* ホバー時の背景色の遷移を滑らかにする */
    }

    button:hover {
        background-color: #0056b3;   /* ボタンにホバーしたときの背景色 */
    }

    button:active {
        background-color: #004085;   /* ボタンをクリックしたときの背景色 */
    }
</style>


    <!-- WOFF SDKの追加 -->
    <script charset="utf-8" src="https://static.worksmobile.net/static/wm/woff/edge/3.6/sdk.js"></script>

    <script>
        var woffid = "aqbfr51mLmVaMKkHxhqkAg"; // 変数woffidの指定

        var currentLocation = null; // 現在の位置情報を保存する変数

        function scanQRCode() {
            woff.scanQR().then((result) => {
                document.getElementById("scanResult").innerText = result.value;
            }).catch((err) => {
                console.log("Error scanning QR:", err);
            });
        }

        function getLocation() {
            navigator.geolocation.getCurrentPosition((position) => {
                currentLocation = position;
                document.getElementById("latitude").innerText = position.coords.latitude;
                document.getElementById("longitude").innerText = position.coords.longitude;
            }, (err) => {
                console.log("Error getting location:", err);
            });
        }

        function sendLocation() {
            if (currentLocation) {
                const locationMessage = `Latitude: ${currentLocation.coords.latitude}, Longitude: ${currentLocation.coords.longitude}`;
                woff.sendMessage({
                    content: locationMessage
                }).then(() => {
                    console.log('message sent');
                }).catch((err) => {
                    console.log('error', err);
                });
            } else {
                alert("Please get the location first!");
            }
        }

        window.onload = function() {
            function successCallback() {
                console.log("Initialization successful.");

                // woff.getProfileの実行
                woff.getProfile().then((profile) => {
                    document.getElementById("domainId").innerText = profile.domainId;
                    document.getElementById("userId").innerText = profile.userId;
                    document.getElementById("displayName").innerText = profile.displayName;
                }).catch((err) => {
                    console.log("Error fetching profile:", err);
                });
            }

            function errorCallback(err) {
                console.log("Initialization failed:", err);
            }

            // woff.initの実行
            woff.init(
                { woffId: woffid }, 
                successCallback, 
                errorCallback
            );
        }
    </script>
</head>
<body>
    <header>
        WOFF サンプル
    </header>

    <!-- プロフィール情報を表示する領域 -->
    <div class="content-section">
        <h3>プロフィール情報:</h3>
        <p>ドメイン ID: <span id="domainId"></span></p>
        <p>ユーザー ID: <span id="userId"></span></p>
        <p>表示名: <span id="displayName"></span></p>
    </div>

    <!-- QRコードスキャンボタンと結果の表示領域 -->
    <div class="content-section">
        <button onclick="scanQRCode()">QR コードスキャナーを起動</button>
        <h3>スキャン結果:</h3>
        <p id="scanResult"></p>
    </div>

    <!-- 位置情報を取得するボタンと結果の表示領域 -->
    <div class="content-section">
        <button onclick="getLocation()">位置情報を取得</button>
        <h3>位置情報結果:</h3>
        <p>緯度: <span id="latitude"></span></p>
        <p>経度: <span id="longitude"></span></p>
        <button onclick="sendLocation()">位置情報を送信</button> <!-- このボタンを位置情報結果の下に移動しました -->
    </div>

    <!-- ... (その他のコンテンツ) ... -->
</body>
</html>
